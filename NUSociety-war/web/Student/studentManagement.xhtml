<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">	

    <h:head>
        <h3>Student Management</h3>
    </h:head>
    
    <h:body>
        
        <h:form>      
            <p:menubar>
                <p:submenu label="Student" icon="ui-users">
                    <p:menuitem value="Create New Student" onclick="PF('dialogCreateNewStudent').show()" icon="pi pi-plus" />
                    <p:menuitem value="View All Students" onclick="PF('dialogAllStudents').show()" icon="pi pi-plus" />
                    <p:menuitem value="Update Student" onclick="PF('dialogUpdateStudent').show()" icon="pi pi-plus" />
                    <p:menuitem value="Delete Student" onclick="PF('dialogDeleteStudent').show()" icon="pi pi-plus" />
                </p:submenu>                                        
            </p:menubar>
            <br/>
        </h:form>
        
        <h:form id="formCreateNewStudent">
            <p:dialog id="dialogCreateNewStudent" widgetVar="dialogCreateNewStudent" header="Create New Student" closable="true">
                <p:messages id="messagesCreateNewStudent" redisplay="false" />
                <p:panelGrid>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="name" value="Name: " style="font-weight: bold;" />
                        </p:column>
                        <p:column>
                            <p:inputText id="name" value="#{studentManagementManagedBean.newStudent.name}" placeholder="Name" required="true" requiredMessage="Name is required" />
                        </p:column>
                        <p:column>
                            <p:message for="name" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="email" value="Email: " style="font-weight: bold;" />
                        </p:column>
                        <p:column>
                            <p:inputText id="email" value="#{studentManagementManagedBean.newStudent.email}" placeholder="Description" required="true" requiredMessage="Description is required" />
                        </p:column>
                        <p:column>
                            <p:message for="email" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="password" value="Password: " style="font-weight: bold;" />
                        </p:column>
                        <p:column>
                            <p:inputText id="password" value="#{studentManagementManagedBean.newStudent.password}" placeholder="Password" required="true" requiredMessage="Password is required" />
                        </p:column>
                        <p:column>
                            <p:message for="password" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="userName" value="UserName: " style="font-weight: bold;" />
                        </p:column>
                        <p:column>
                            <p:inputText id="userName" value="#{studentManagementManagedBean.newStudent.userName}" placeholder="UserName" required="true" requiredMessage="UserName is required" />
                        </p:column>
                        <p:column>
                            <p:message for="userName" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="studentProfilePicture" value="ProfilePicture: " style="font-weight: bold;" />
                        </p:column>
                        <p:column>
                            <p:inputText id="studentProfilePicture" value="#{studentManagementManagedBean.newStudent.profilePicture}" placeholder="ProfilePicture" required="true" requiredMessage="Profile Picture is required" />
                        </p:column>
                        <p:column>
                            <p:message for="studentProfilePicture" />
                        </p:column>
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="selAccessRight" value="Access Right: " style="font-weight: bold;" />
                        </p:column>
                        <p:column>
                            <p:selectOneMenu id="selAccessRight" value="#{studentManagementManagedBean.newStudent.accessRightEnum}">
                                <f:selectItems value="#{enumValuesProvider.accessRights}"/>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column>
                            <p:message for="selAccessRight" />
                        </p:column>
                    </p:row>

                    <p:row>
                        <p:column colspan="3">
                            <p:commandButton type="reset" value="Clear" />&nbsp;
                            <p:commandButton  value="Create New Student" update="@form formCreateNewStudent" actionListener="#{studentManagementManagedBean.createNewStudent}" oncomplete="PF('dialogCreateNewStudent').show();" />
                        </p:column>
                    </p:row>

                </p:panelGrid>
            </p:dialog>
        </h:form>
        
        <h:form id="formAllStudents">
            <p:dialog id="dialogAllStudents" widgetVar="dialogAllStudents" header="View All Students" closable="true">
                
                <p:messages id="messagesAllStudents" redisplay="false" />
                <p:messages id="messages" redisplay="false" closable="true" />
                
                <p:dataTable id="dataTableAllStudents"  value="#{studentManagementManagedBean.students}" var="student" rowKey="#{student.studentId}" rowIndexVar="row"
                             rows="10" paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="10,20,50">

                    <p:column headerText="Student ID" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.studentId}" />
                    </p:column>

                    <p:column headerText="Name" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.name}" />
                    </p:column>
                    
                    <p:column headerText="Email" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.email}" />
                    </p:column>
                    
                    <p:column headerText="Password" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.password}" />
                    </p:column>
                    
                    <p:column headerText="UserName" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.userName}" />
                    </p:column>
                    
                    <p:column headerText="Profile Picture" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.profilePicture}" />
                    </p:column>
                    
                    <p:column headerText="Access Right" sortBy="#{student.studentId}">
                        <h:outputText value="#{student.accessRightEnum}" />
                    </p:column>

                </p:dataTable>
                
            </p:dialog>
        </h:form>
        
        <h:form id="formUpdateStudent">
                <p:dialog id="dialogUpdateStudent" widgetVar="dialogUpdateStudent" header="Update Student" closable="true">
                    
                    <p:messages id="messagesUpdateStudent" redisplay="false" />
                    
                    <p:panelGrid>
                        
                        <p:row>
                            <p:column>
                                <h:outputLabel value="Student ID: " />
                            </p:column>
                            <p:column>
                                <p:inputText id="studentId" value="#{studentManagementManagedBean.studentToUpdate.studentId}" placeholder="1" required="true" requiredMessage="ID is required" />
                            </p:column>
                            <p:column>
                                &nbsp;
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <h:outputLabel value="Name: " />
                            </p:column>
                            <p:column>
                                <p:inputText id="studentName" value="#{studentManagementManagedBean.studentToUpdate.name}" placeholder="Name" required="true" requiredMessage="Name is required" />
                            </p:column>
                            <p:column>
                                &nbsp;
                            </p:column>
                        </p:row>
                        
                        <p:row>
                            <p:column>
                                <h:outputLabel value="Email: " />
                            </p:column>
                            <p:column>
                                <p:inputText id="studentEmail" value="#{studentManagementManagedBean.studentToUpdate.email}" placeholder="Email" required="true" requiredMessage="Email is required" />
                            </p:column>
                            <p:column>
                                &nbsp;
                            </p:column>
                        </p:row>
                        
                        <p:row>
                            <p:column>
                                <h:outputLabel value="Password: " />
                            </p:column>
                            <p:column>
                                <p:inputText id="studentPassword" value="#{studentManagementManagedBean.studentToUpdate.password}" placeholder="Password" required="true" requiredMessage="Password is required" />
                            </p:column>
                            <p:column>
                                &nbsp;
                            </p:column>
                        </p:row>
                        
                        <p:row>
                            <p:column>
                                <p:outputLabel for="userName" value="UserName: "/>
                            </p:column>
                            <p:column>
                                <p:inputText id="userName" value="#{studentManagementManagedBean.studentToUpdate.userName}" placeholder="UserName"/>
                            </p:column>
                            <p:column>
                                <p:message for="userName" />
                            </p:column>
                        </p:row>

                        <p:row>
                            <p:column>
                                <p:outputLabel for="studentProfilePicture" value="ProfilePicture: "/>
                            </p:column>
                            <p:column>
                                <p:inputText id="studentProfilePicture" value="#{studentManagementManagedBean.studentToUpdate.profilePicture}" placeholder="ProfilePicture"/>
                            </p:column>
                            <p:column>
                                <p:message for="studentProfilePicture" />
                            </p:column>
                        </p:row>
                    
                        <p:row>
                            <p:column>
                                <p:outputLabel for="selAccessRight" value="Access Right: "/>
                            </p:column>
                            <p:column>
                                <p:selectOneMenu id="selAccessRight" value="#{studentManagementManagedBean.studentToUpdate.accessRightEnum}">
                                   <f:selectItems value="#{enumValuesProvider.accessRights}"
                                       var="accessRight"
                                       itemValue="#{accessRight}"
                                       itemLabel="#{accessRight.name()}" />
                                </p:selectOneMenu>
                            </p:column>
                            <p:column>
                                <p:message for="selAccessRight" />
                            </p:column>
                        </p:row>
 
                        <p:row>
                            <p:column colspan="3">
                                <p:commandButton value="Update Student" actionListener="#{studentManagementManagedBean.updateStudent}" update="@form formUpdateStudent:dialogUpdateStudent" oncomplete="PF('dialogUpdateStudent').show();" />
                            </p:column>
                        </p:row>

                    </p:panelGrid>

                </p:dialog>

            </h:form>
        
         <h:form id="formDeleteStudent">
                <p:dialog id="dialogDeleteStudent" widgetVar="dialogDeleteStudent" header="Delete Student" closable="true">
                    <p:messages id="messagesDeleteStudent" redisplay="false" />
                    
                    <p:panelGrid>
                        
                        <p:row>
                            <p:column>
                                <h:outputLabel value="Student ID: " />
                            </p:column>
                            <p:column>
                                <p:inputText id="studentId" value="#{studentManagementManagedBean.studentToDelete.studentId}" placeholder="1" required="true" requiredMessage="ID is required" />
                            </p:column>
                            <p:column>
                                &nbsp;
                            </p:column>
                        </p:row>
                        
                        <p:row>
                            <p:column colspan="3">
                                <p:commandButton value="Delete Student" actionListener="#{studentManagementManagedBean.deleteStudent}" update="@form formDeleteStudent:dialogDeleteStudent" oncomplete="PF('dialogDeleteStudent').show();" />
                            </p:column>
                        </p:row>
                        
                    </p:panelGrid>
                </p:dialog>

            </h:form>
        
    </h:body>

</ui:composition>