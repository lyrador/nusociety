<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                template="/Template/defaultTemplate.xhtml"
                xmlns:p="http://primefaces.org/ui">	

    <ui:define name="content">
        
        <h:form>
            
            <p:growl id="messages"/>

            <p:menubar>
                <p:menuitem value="Society Home" icon="pi pi-fw pi-home" style="font-size: 14px; width:120px"/>
                <p:menuitem value="Posts" icon="pi pi-fw pi-pencil" style="font-size: 14px; width:70px" />
                <p:menuitem value="Events" url="#{request.contextPath}/Society/viewSociety/#{societyManagedBean.society.societyId}-#{societyManagedBean.society.name.replaceAll(' ', '-')}/Events" icon="pi pi-fw pi-calendar" style="font-size: 14px; width:70px" />
                <p:menuitem value="Roster" url="#{request.contextPath}/Society/viewSociety/#{societyManagedBean.society.societyId}-#{societyManagedBean.society.name.replaceAll(' ', '-')}/Roster" icon="pi pi-fw pi-user" style="font-size: 14px; width:70px" />
                <p:menuitem value="Announcement Management" url="#{request.contextPath}/Society/viewSociety/#{societyManagedBean.society.societyId}-#{societyManagedBean.society.name.replaceAll(' ', '-')}/Announcement" icon="pi pi-fw pi-user" style="font-size: 14px; width:220px" rendered="#{sessionScope.currentStudent.accessRightEnum == societyManagedBean.leaderAccessRightEnum}"/>
            </p:menubar>
            
            <h:outputText value="#{societyManagedBean.society.name}" style="font-size:25px; font-weight: bold;"/>
            <p:commandButton id="follow_button" rendered="#{!followManagedBean.followedSocieties.contains(societyManagedBean.society) and !followManagedBean.memberSocieties.contains(societyManagedBean.society)}" value="Follow" icon="pi pi-plus" 
                             style="float: right;" actionListener="#{followManagedBean.follow}" update="@form">
                <f:param name="societyId" value="#{societyManagedBean.society.societyId}" />
            </p:commandButton>

            <p:commandButton id="unfollow_button" rendered="#{followManagedBean.followedSocieties.contains(societyManagedBean.society) and !followManagedBean.memberSocieties.contains(societyManagedBean.society)}" value="Unfollow" icon="pi pi-minus" 
                             style="float: right;" actionListener="#{followManagedBean.unfollow}" update="@form">
                <f:param name="societyId" value="#{societyManagedBean.society.societyId}" />
            </p:commandButton>
            
            <h:outputText rendered="#{followManagedBean.memberSocieties.contains(societyManagedBean.society)}" value="You are a member of this society" style="float: right;"/>
            <br/>
            <h:outputText value="#{followManagedBean.memberCount} members" style="float: right;"/>
            <br/>
            <h:outputText value="#{followManagedBean.followerCount} followers" style="float: right;"/>
            <br/>
            <h:outputText value="#{societyManagedBean.society.description}" />
            <br/>
            <br/>
            <p:graphicImage value="#{FacesContext.getCurrentInstance().getExternalContext()}/resources/Images/#{societyManagedBean.society.profilePicture}" width="300px" height="300px"/> 

            <h3>Public Posts</h3>
<!--            can modify this to whatever design-->
            <div style="display:flex">
                
                <p:panel style="width:33%">
                    <h:outputText value="first post"/>
                </p:panel>
                <p:panel style="width:33%">
                    <h:outputText value="second post"/>
                </p:panel>
                <p:panel style="width:33%">
                    <h:outputText value="third post"/>
                </p:panel>
            </div>

        </h:form>
        
        <h:form id="form">

            
            <div class="card">
                <h3>Events</h3>
                <p:carousel value="#{carouselViewManagedBean.events}" var="event" circular="true" numVisible="3" autoPlayInterval="3000" responsive="true" >

                    <div class="event" style="width:70%">
                        <div class="event-content">
                            <div>
                                <h3>#{event.eventName}</h3>
                                <h5 style="font-style: oblique">#{event.eventDetails}</h5>
                                <h5 style="font-style: oblique">Location: #{event.eventLocation}</h5>
                                <div class="p-mt-5">
                                     <p:commandButton value="View" update="formViewEvent" oncomplete="PF('dialogViewEvent').show()" icon="pi pi-file" >
                                        <f:setPropertyActionListener value="#{event}" target="#{eventManagementManagedBean.viewEvent}" />
                                    </p:commandButton>

                                </div>
                            </div>
                        </div>
                    </div>
                </p:carousel>
            </div>
        </h:form>
        
        <h:form id="formViewEvent">

            <p:dialog id="dialogViewEvent" widgetVar="dialogViewEvent" header="View Event" closable="true">
                
                <p:panelGrid>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventId" value="Event ID: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventId" value="#{eventManagementManagedBean.viewEvent.eventId}" />
                        </p:column>                 
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventName" value="Event Name: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventName" value="#{eventManagementManagedBean.viewEvent.eventName}" />
                        </p:column>                 
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventDetails" value="Event Details: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventDetails" value="#{eventManagementManagedBean.viewEvent.eventDetails}" />
                        </p:column>                 
                    </p:row>

                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventLocation" value="Event Location: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventLocation" value="#{eventManagementManagedBean.viewEvent.eventLocation}" />
                        </p:column>                 
                    </p:row>

                   <p:row>
                        <p:column>
                            <p:outputLabel for="eventStartDate" value="Event Start Date: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventStartDate" value="#{eventManagementManagedBean.viewEvent.eventDateStart}" />
                        </p:column>                 
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventEndDate" value="Event End Date: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventEndDate" value="#{eventManagementManagedBean.viewEvent.eventDateEnd}" />
                        </p:column>                 
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventCapacity" value="Event Capacity: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventCapacity" value="#{eventManagementManagedBean.viewEvent.eventCapacity}" />
                        </p:column>                 
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventSociety" value="Event Society: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventSociety" value="#{eventManagementManagedBean.viewEvent.society.name}" />
                        </p:column>                 
                    </p:row>
                    
                    <p:row>
                        <p:column>
                            <p:outputLabel for="eventOrganiser" value="Event Organiser: " />
                        </p:column>
                        <p:column>
                            <h:outputText id="eventOrganiser" value="#{eventManagementManagedBean.viewEvent.student.email}" />
                        </p:column>                 
                    </p:row>
                    

                </p:panelGrid>

            </p:dialog>

        </h:form>
        
    </ui:define>

</ui:composition>